<div data-controller="buddy">
  <% if Buddy.count == 0 %>
  <div data-buddy-target="addBuddyHeader">
      <p><em>You do not have a buddy yet.</em></p>
  </div>
    <div class="sp-btn-green clickable" data-action="click->buddy#show">
      <p class="m-0">Add a Buddy</p>
    </div>

  <div>
    <%= simple_form_for (@buddy), html: { class: "d-none", data: { buddy_target: "addBuddy", action: "submit->buddy#submitBuddy" } } do |f| %>
    <%= f.input :name, label: 'Buddy Name' %>
    <%= f.input :email, label: 'Buddy Email' %>
    <%= f.input :hp, label: 'Buddy Hp' %>
    <%= f.submit "Add your buddy!", class: 'sp-btn-green'%>
    <% end %>
  </div>


  <% else %>

      <p class="m-0">Select a Buddy to send the schedule</p>
      <% @buddies.each do |buddy| %>
        <div class="card">
          <p><%= buddy.name %></p>
          <p><%= buddy.email %></p>
          <%= link_to  "Send schedule to buddy", send_schedule_buddy_path(buddy) %>
        </div>
    <% end %>

  <div data-buddy-target="addBuddyHeader">
    <div class="sp-btn-green clickable" data-action="click->buddy#show">
      <p class="m-0">Add another Buddy</p>
    </div>
  </div>

  <div>
    <%= simple_form_for @buddy, html: { class: "d-none", data: { buddy_target: "addBuddy", action: "submit->buddy#submitBuddy" } } do |f| %>
    <%= f.input :name, label: 'Buddy Name' %>
    <%= f.input :email, label: 'Buddy Email' %>
    <%= f.input :hp, label: 'Buddy Hp' %>
    <%= f.submit "Add your buddy!", class: 'sp-btn-green'%>
    <% end %>
  </div>

  <% end %>
</div>