<div class="listings-container" data-controller="buddy">
  <div class="row justify-content-center">

    <div class="mt-2 mb-2 col-sm-12 col-lg-6">
      <div class="d-flex mb-4">
        <div class="d-flex align-items-center me-2">
          <%= link_to plants_path do %>
            <i class="back-button fa-solid fa-angles-left"></i>
          <% end %>
        </div>

        <div>
          <h1 class="m-0">
            My Buddies
          </h1>
        </div>
      </div>
    </div>

  </div>

  <div class="row justify-content-center">
    <div class="col-sm-12 col-lg-6 mb-4">
      <% if @buddies.count == 0 %>
  <div class="d-flex justify-content-center mt-5" data-buddy-target="addBuddyHeader">
    <div>
        <p><em>You do not have a buddy yet.</em></p>
      <div class="sp-btn-green clickable" data-action="click->buddy#show">
        <p class="m-0">Add a Buddy</p>
      </div>
    </div>
  </div>

  <div class="d-flex justify-content-center mt-5" data-buddy-target="form">
    <%= render "addbuddy", buddy: @buddy %>
  </div>


  <% else %>

      <p class="mb-2"><strong>Select a Buddy to send your plant watering schedule</strong></p>
      <% @buddies.each do |buddy| %>
        <div class="plant-card p-3 m-2" data-controller="delete-illness">
          <div>
            <div class="d-flex justify-content-between" >
              <p><strong>Buddy Name: </strong><%= buddy.name %></p>
              <%= link_to buddy_path(buddy), data: {turbo_method: :delete, turbo_confirm: "Are you sure?", action:"click->delete-illness#clickDelete"}, class:"text-decoration-none" do%>
              <p><strong>X</strong></p>
              <% end %>
            </div>

            <p><strong>Email: </strong><%= buddy.email %></p>
          </div>
          <div>
            <%= link_to  "Send watering schedule", send_schedule_buddy_path(buddy), class: "text-decoration-none fw-bold" %>
          </div>
        </div>
    <% end %>

  <div class="d-flex mt-4 justify-content-center" data-buddy-target="addBuddyHeader">
    <div class="sp-btn-green clickable" data-action="click->buddy#show">
      <p class="m-0">Add another Buddy</p>
    </div>
  </div>

  <div class="mt-3">
    <%= simple_form_for (@buddy), html: { class: "d-none", data: { buddy_target: "addBuddy" } } do |f| %>
    <%= f.input :name, label: 'Buddy Name' %>
    <%= f.input :email, label: 'Buddy Email' %>
    <%= f.input :hp, label: 'Buddy Hp' %>
    <%= f.submit "Add your buddy!", class: 'sp-btn-green'%>
    <% end %>
  </div>

  <% end %>
</div>
