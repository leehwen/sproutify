<div data-controller="mygarden">
  
  
  <h1 class="d-flex justify-content-center p-2">Plants inside your <%= @collection.name %> Collection </h1>

  <div>
  <% @plants.each do |plant| %>
    <div class="row gx-0">
      <div class="plant-card col-sm-12 col-lg-4">
        <% plantinfo = PlantInfo.find(plant.plant_info_id) %>
        <% if plant.image.attached? %>
            <%= cl_image_tag plant.image.key, class: "plant-card-image" %>
        <% else %>
        <% end %>
        <div class="plant-card-content">
          <p><strong>Nickname: </strong><%= plant.nickname %></p>
          <p><strong>Remarks: </strong><%= plant.remarks  %></p>
          <p><strong>Species: </strong><%= plantinfo.name  %></p>
          <p><strong>Watering: </strong><%= plantinfo.watering  %></p>
          <%= link_to "View Details", plant_path(plant) %>
        </div>
      </div>
    </div>
  <% end %>

  <div>
    <div class="d-flex justify-content-center">
      <p class="sp-btn-green clickable" data-action="click->mygarden#addtocollection">Add another plant to your collection</p>
    </div>
  </div>

  <div class="d-none" data-mygarden-target="displayAddPlant">
    <%= simple_form_for @collection do |f| %>
        <%= f.label "Add plant to collection" %>
        <%= f.association :plants, collection: current_user.plants, label_method: :nickname, label: false,  input_html: { multiple: true }%>
        <%= f.button :submit %>
    <% end %>
  <div>
</div>